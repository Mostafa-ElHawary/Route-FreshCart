import{a as A}from"./chunk-F2HEYO64.js";import{a as k,b as f,c as G,d as M,e as E,f as y,h as R,i as D,j,k as L,n as $}from"./chunk-L43IJ3GV.js";import{h as z}from"./chunk-FYGAENKV.js";import"./chunk-RQSOTOV7.js";import{h as N,j as q}from"./chunk-EI5NMXFY.js";import{Ab as _,Gb as s,Ib as T,Ob as I,Qa as a,Qb as x,Ra as S,Rb as g,aa as V,fb as c,hb as u,ka as v,la as C,lb as p,ma as b,pb as r,qb as o,rb as d,vb as h,zb as w}from"./chunk-U6TSNRMP.js";import"./chunk-CWTPBX7D.js";var P=(e,l)=>({"text-green-500 font-semibold scale-105":e,"text-gray-400":l}),F=e=>({"rotate-12":e}),O=(e,l)=>({"text-green-500":e,"text-gray-400":l}),B=(e,l)=>({"border-red-500":e,"border-green-500":l}),Z=(e,l)=>({"bg-gray-400 cursor-not-allowed":e,"bg-indigo-600 hover:bg-indigo-700":l}),U=e=>({"border-red-500":e});function W(e,l){e&1&&d(0,"i",9)}function H(e,l){e&1&&d(0,"i",9)}function J(e,l){e&1&&d(0,"i",9)}function K(e,l){e&1&&(r(0,"p"),d(1,"i",20),s(2," Email is required "),o())}function Q(e,l){e&1&&(r(0,"p"),d(1,"i",20),s(2," Enter a valid email "),o())}function X(e,l){if(e&1&&(r(0,"p"),d(1,"i",20),s(2),o()),e&2){let t,n=_(3);a(2),T(" ",(t=n.verifyEmail.get("email"))==null?null:t.getError("emailDomain")," ")}}function Y(e,l){e&1&&(r(0,"p"),d(1,"i",20),s(2," Invalid email"),o())}function ee(e,l){if(e&1&&(r(0,"div",15),c(1,K,3,0,"p")(2,Q,3,0)(3,X,3,1)(4,Y,3,0),o()),e&2){let t,n=_(2);a(),p(1,!((t=n.verifyEmail.get("email"))==null||t.errors==null)&&t.errors.required?1:!((t=n.verifyEmail.get("email"))==null||t.errors==null)&&t.errors.email?2:!((t=n.verifyEmail.get("email"))==null||t.errors==null)&&t.errors.emailDomain?3:4)}}function te(e,l){if(e&1){let t=h();r(0,"form",11),w("ngSubmit",function(){v(t);let i=_();return C(i.sendVerificationEmail())}),r(1,"div",12)(2,"div")(3,"label",13),s(4,"Email address"),o(),d(5,"input",14),c(6,ee,5,1,"div",15),o()(),r(7,"div")(8,"button",16),d(9,"i",17),s(10," Send Verification Code "),o(),r(11,"div",18)(12,"p",19),d(13,"i",20),s(14," We've sent a verification code to your email. "),o()()()()}if(e&2){let t,n,i=_();u("formGroup",i.verifyEmail),a(5),u("ngClass",g(5,B,((t=i.verifyEmail.get("email"))==null?null:t.invalid)&&((t=i.verifyEmail.get("email"))==null?null:t.touched),((t=i.verifyEmail.get("email"))==null?null:t.valid)&&((t=i.verifyEmail.get("email"))==null?null:t.touched))),a(),p(6,(n=i.verifyEmail.get("email"))!=null&&n.invalid&&((n=i.verifyEmail.get("email"))!=null&&n.touched)?6:-1),a(2),u("disabled",i.verifyEmail.invalid)("ngClass",g(8,Z,i.verifyEmail.invalid,i.verifyEmail.valid))}}function ie(e,l){e&1&&(r(0,"p"),d(1,"i",20),s(2," Verification code is required "),o())}function ne(e,l){e&1&&(r(0,"p"),d(1,"i",20),s(2," Enter a valid 6-digit code "),o())}function oe(e,l){e&1&&(r(0,"p"),d(1,"i",20),s(2," Code must be exactly 6 digits "),o())}function re(e,l){e&1&&(r(0,"p"),d(1,"i",20),s(2," Invalid verification code "),o())}function le(e,l){if(e&1&&(r(0,"div",15),c(1,ie,3,0,"p")(2,ne,3,0)(3,oe,3,0)(4,re,3,0),o()),e&2){let t,n=_(2);a(),p(1,!((t=n.verifyCode.get("resetCode"))==null||t.errors==null)&&t.errors.required?1:!((t=n.verifyCode.get("resetCode"))==null||t.errors==null)&&t.errors.pattern?2:!((t=n.verifyCode.get("resetCode"))==null||t.errors==null)&&t.errors.minlength||!((t=n.verifyCode.get("resetCode"))==null||t.errors==null)&&t.errors.maxlength?3:4)}}function ae(e,l){if(e&1){let t=h();r(0,"form",11),w("ngSubmit",function(){v(t);let i=_();return C(i.setVerifyCode())}),r(1,"div",21)(2,"div")(3,"label",22),s(4,"Verification Code"),o(),d(5,"input",23),c(6,le,5,1,"div",15),o()(),r(7,"div")(8,"button",16),d(9,"i",24),s(10," Verify Code "),o()()()}if(e&2){let t,n,i=_();u("formGroup",i.verifyCode),a(5),u("ngClass",g(5,B,((t=i.verifyCode.get("resetCode"))==null?null:t.invalid)&&((t=i.verifyCode.get("resetCode"))==null?null:t.touched),((t=i.verifyCode.get("resetCode"))==null?null:t.valid)&&((t=i.verifyCode.get("resetCode"))==null?null:t.touched))),a(),p(6,(n=i.verifyCode.get("resetCode"))!=null&&n.invalid&&((n=i.verifyCode.get("resetCode"))!=null&&n.touched)?6:-1),a(2),u("disabled",i.verifyCode.invalid)("ngClass",g(8,Z,i.verifyCode.invalid,i.verifyCode.valid))}}function se(e,l){e&1&&(b(),r(0,"svg",32),d(1,"path",33)(2,"path",34),o())}function de(e,l){e&1&&(b(),r(0,"svg",32),d(1,"path",35)(2,"path",36),o())}function me(e,l){e&1&&(r(0,"p"),d(1,"i",37),s(2," Password is required"),o())}function ue(e,l){e&1&&(r(0,"p"),d(1,"i",37),s(2," Password must be at least 8 characters long "),o())}function pe(e,l){e&1&&(r(0,"p"),d(1,"i",37),s(2," Password must contain at least one lowercase letter, one uppercase letter, one number, and one special character (@$!%*?&) "),o())}function ce(e,l){if(e&1&&(r(0,"div",15),c(1,me,3,0,"p")(2,ue,3,0)(3,pe,3,0),o()),e&2){let t,n=_(2);a(),p(1,(t=n.resetPassword.get("newPassword"))!=null&&t.hasError("required")?1:(t=n.resetPassword.get("newPassword"))!=null&&t.hasError("minlength")?2:(t=n.resetPassword.get("newPassword"))!=null&&t.hasError("pattern")?3:-1)}}function _e(e,l){if(e&1){let t=h();r(0,"form",11),w("ngSubmit",function(){v(t);let i=_();return C(i.setResetPassword())}),r(1,"div",21)(2,"div")(3,"label",13),s(4,"Email address"),o(),d(5,"input",25),o(),r(6,"div")(7,"label",26),s(8,"New Password"),o(),r(9,"div",27),d(10,"input",28),r(11,"button",29),w("click",function(){v(t);let i=_();return C(i.togglePasswordVisibility())}),c(12,se,3,0,"svg",30)(13,de,3,0,"svg",30),o()(),c(14,ce,4,1,"div",15),o()(),r(15,"div")(16,"button",31),s(17," Reset Password "),o()()()}if(e&2){let t,n,i=_();u("formGroup",i.resetPassword),a(10),u("type",i.showPassword?"text":"password")("ngClass",x(6,U,((t=i.resetPassword.get("newPassword"))==null?null:t.invalid)&&(((t=i.resetPassword.get("newPassword"))==null?null:t.touched)||((t=i.resetPassword.get("newPassword"))==null?null:t.dirty)))),a(2),u("ngIf",!i.showPassword),a(),u("ngIf",i.showPassword),a(),p(14,(n=i.resetPassword.get("newPassword"))!=null&&n.invalid&&((n=i.resetPassword.get("newPassword"))!=null&&n.touched||(n=i.resetPassword.get("newPassword"))!=null&&n.dirty)?14:-1)}}var ye=(()=>{let l=class l{constructor(n,i){this._AuthService=n,this._Router=i,this.step=1,this.verifyEmail=new E({email:new y("",[f.required,f.email,this._AuthService.emailValidator()])},{updateOn:"blur"}),this.verifyCode=new E({resetCode:new y(null,[f.required,f.pattern(/^\d{6}$/),f.minLength(6),f.maxLength(6)])}),this.resetPassword=new E({email:new y(null,[f.required,f.email,this._AuthService.emailValidator()]),newPassword:new y(null,[f.required,f.minLength(8),f.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/)])}),this.showPassword=!1}proceedToNextStep(){this.step++}sendVerificationEmail(){let n=this.verifyEmail.get("email")?.value;this.resetPassword.patchValue(this.verifyEmail.value),this.verifyEmail.valid?console.log(n):console.log("not valid"),this._AuthService.setEmailVerification({email:n}).subscribe({next:i=>{console.log("sendVerificationEmail",i),i.statusMsg==="success"?this.proceedToNextStep():console.error("Verification email not sent:",i.statusMsg)},error:i=>{console.error("Error sending verification email:",i)}})}setVerifyCode(){this._AuthService.setCodeVerification(this.verifyCode.value).subscribe({next:n=>{console.log(n),n.status==="Success"&&(this.proceedToNextStep(),this.verifyCode.reset())},error:n=>{console.log(n)}})}setResetPassword(){this._AuthService.setResetPassword(this.resetPassword.value).subscribe({next:n=>{localStorage.setItem("userToken",n.token),this._AuthService.saveUserData(),this._Router.navigate(["/home"])},error:n=>{console.log(n)}})}togglePasswordVisibility(){this.showPassword=!this.showPassword}};l.\u0275fac=function(i){return new(i||l)(S(A),S(z))},l.\u0275cmp=V({type:l,selectors:[["app-forgotpasssword"]],standalone:!0,features:[I],decls:29,vars:31,consts:[[1,"min-h-screen","flex","items-center","justify-center","bg-gradient-to-r","from-blue-500","to-indigo-600","py-12","px-4","sm:px-6","lg:px-8","animate__animated","animate__fadeIn"],[1,"max-w-md","w-full","space-y-8","bg-white","p-10","rounded-xl","shadow-2xl","animate__animated","animate__zoomIn","animate__delay-1s"],[1,"text-center","animate__animated","animate__fadeIn"],[1,"mt-6","text-3xl","font-extrabold","text-gray-900","animate__animated","animate__slideInDown"],[1,"mt-2","text-sm","text-gray-600","animate__animated","animate__fadeIn","animate__delay-1s"],[1,"mt-4","text-sm","text-gray-600","space-y-4"],[1,"flex","items-center","justify-center","transition-all","duration-300","ease-in-out",3,"ngClass"],[1,"mr-2","transition-transform","duration-300",3,"ngClass"],[3,"ngClass"],[1,"fas","fa-check-circle","ml-2","animate__animated","animate__bounceIn"],[1,"mt-8","space-y-6",3,"formGroup"],[1,"mt-8","space-y-6",3,"ngSubmit","formGroup"],[1,"rounded-md","shadow-sm"],["for","email",1,"sr-only"],["id","email","name","email","type","email","formControlName","email","required","","placeholder","Email address",1,"appearance-none","relative","block","w-full","px-3","py-2","border","border-gray-300","placeholder-gray-500","text-gray-900","rounded-md","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500","focus:z-10","sm:text-sm",3,"ngClass"],[1,"mt-1","text-sm","text-red-600"],["type","submit",1,"group","relative","w-full","flex","justify-center","py-2","px-4","border","border-transparent","text-sm","font-medium","rounded-md","text-white","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500","transition","duration-300","ease-in-out","transform","hover:-translate-y-1","hover:scale-105",3,"disabled","ngClass"],[1,"fas","fa-paper-plane","mr-2"],[1,"text-center","mt-2"],[1,"text-sm","text-gray-600"],[1,"fas","fa-exclamation-circle","mr-1"],[1,"rounded-md","shadow-sm","-space-y-px"],["for","resetCode",1,"sr-only"],["id","resetCode","name","resetCode","type","text","formControlName","resetCode","required","","placeholder","Enter 6-digit code",1,"appearance-none","rounded-none","relative","block","w-full","px-3","py-2","border","border-gray-300","placeholder-gray-500","text-gray-900","rounded-t-md","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500","focus:z-10","sm:text-sm",3,"ngClass"],[1,"fas","fa-check-circle","mr-2"],["id","email","name","email","type","email","formControlName","email","required","","placeholder","Email","readonly","",1,"appearance-none","rounded-none","relative","block","w-full","px-3","py-2","border","border-gray-300","placeholder-gray-500","text-gray-900","rounded-t-md","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500","focus:z-10","sm:text-sm"],["for","newPassword",1,"sr-only"],[1,"relative"],["id","newPassword","name","newPassword","formControlName","newPassword","required","","placeholder","New Password",1,"appearance-none","rounded-none","relative","block","w-full","px-3","py-2","border","border-gray-300","placeholder-gray-500","text-gray-900","rounded-b-md","focus:outline-none","focus:ring-indigo-500","focus:border-indigo-500","focus:z-10","sm:text-sm","pr-10",3,"type","ngClass"],["type","button",1,"absolute","inset-y-0","right-0","pr-3","flex","items-center","z-20",3,"click"],["xmlns","http://www.w3.org/2000/svg","class","h-5 w-5 text-gray-400","viewBox","0 0 20 20","fill","currentColor",4,"ngIf"],["type","submit",1,"group","relative","w-full","flex","justify-center","py-2","px-4","border","border-transparent","text-sm","font-medium","rounded-md","text-white","bg-indigo-600","hover:bg-indigo-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500","transition","duration-300","ease-in-out","transform","hover:-translate-y-1","hover:scale-105"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","text-gray-400"],["d","M10 12a2 2 0 100-4 2 2 0 000 4z"],["fill-rule","evenodd","d","M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z","clip-rule","evenodd"],["fill-rule","evenodd","d","M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.268 5.943 14.478 3 10 3a9.958 9.958 0 00-4.512 1.074l-1.78-1.781zm4.261 4.26l1.514 1.515a2.003 2.003 0 012.45 2.45l1.514 1.514a4 4 0 00-5.478-5.478z","clip-rule","evenodd"],["d","M12.454 16.697L9.75 13.992a4 4 0 01-3.742-3.741L2.335 6.578A9.98 9.98 0 00.458 10c1.274 4.057 5.065 7 9.542 7 .847 0 1.669-.105 2.454-.303z"],[1,"fa-solid","fa-exclamation"]],template:function(i,m){i&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),s(4," Forgot Password "),o(),r(5,"p",4),s(6," Please follow these 3 steps to reset your password: "),o(),r(7,"ol",5)(8,"li",6)(9,"span",7),s(10,"1."),o(),r(11,"span",8),s(12," Verify your email address "),o(),c(13,W,1,0,"i",9),o(),r(14,"li",6)(15,"span",7),s(16,"2."),o(),r(17,"span"),s(18,"Enter the verification code"),o(),c(19,H,1,0,"i",9),o(),r(20,"li",6)(21,"span",7),s(22,"3."),o(),r(23,"span"),s(24,"Set your new password"),o(),c(25,J,1,0,"i",9),o()()(),c(26,te,15,11,"form",10)(27,ae,11,11,"form",10)(28,_e,18,8,"form",10),o()()),i&2&&(a(8),u("ngClass",g(13,P,m.step>=1,m.step<1)),a(),u("ngClass",x(16,F,m.step>=1)),a(2),u("ngClass",g(18,O,m.verifyEmail.valid&&m.step>=1,m.step<1)),a(2),p(13,m.step>=1&&m.verifyEmail.valid?13:-1),a(),u("ngClass",g(21,P,m.step>=2,m.step<2)),a(),u("ngClass",x(24,F,m.step>=2)),a(4),p(19,m.step>=2&&m.verifyCode.valid?19:-1),a(),u("ngClass",g(26,P,m.step>=3,m.step<3)),a(),u("ngClass",x(29,F,m.step>=3)),a(4),p(25,m.step>=3&&m.resetPassword.valid?25:-1),a(),p(26,m.step===1?26:-1),a(),p(27,m.step===2?27:-1),a(),p(28,m.step===3?28:-1))},dependencies:[$,R,k,G,M,L,D,j,N,q]});let e=l;return e})();export{ye as ForgotpassswordComponent};
